<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: none; /* Hide the modal by default */
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

.modal-content {
  background-color: #fff;
  padding: 20px;
  border-radius: 4px;
}

#modal-message {
  margin: 0;
}


</style>
<body>


<ul class="innerUl">
  <li><a href="#" class="genre-link" data-genre="drama">DRAMA</a></li>
  <li><a href="#" class="genre-link" data-genre="adventure">ADVENTURE</a></li>
  <li><a href="#" class="genre-link" data-genre="doujinshi">DOUJINSHI</a></li>
  <li><a href="#" class="genre-link" data-genre="ecchi">ECCHI</a></li>
  <li><a href="#" class="genre-link" data-genre="fantasy">FANTASY</a></li>
  <li><a href="#" class="genre-link" data-genre="harem">HAREM</a></li>
  <li><a href="#" class="genre-link" data-genre="historical">HISTORICAL</a></li>
  <li><a href="#" class="genre-link" data-genre="horror">HORROR</a></li>
  <li><a href="#" class="genre-link" data-genre="josei">JOSEI</a></li>
  <li><a href="#" class="genre-link" data-genre="manga">MANGA</a></li>
  <li><a href="#" class="genre-link" data-genre="manhua">MANHUA</a></li>
  <li><a href="#" class="genre-link" data-genre="manhwa">MANHWA</a></li>
  <li><a href="#" class="genre-link" data-genre="mature">MATURE</a></li>
  <li><a href="#" class="genre-link" data-genre="mystery">MYSTERY</a></li>
  <li><a href="#" class="genre-link" data-genre="psychological">PSYCHOLOGICAL</a></li>
  <li><a href="#" class="genre-link" data-genre="sci-fi">SCI-FI</a></li>
  <li><a href="#" class="genre-link" data-genre="SEINEN">SEINEN</a></li>
  <li><a href="#" class="genre-link" data-genre="Award Winning">AWARD WINNING</a></li>
  <li><a href="#" class="genre-link" data-genre="action">ACTION</a></li>
  <li><a href="#" class="genre-link" data-genre="adaptation">ADAPTATION</a></li>
  <li><a href="#" class="genre-link" data-genre="adult">ADULT</a></li>
  <li><a href="#" class="genre-link" data-genre="animal">ANIMAL</a></li>
  <li><a href="#" class="genre-link" data-genre="anthology">ANTHOLOGY</a></li>
  <li><a href="#" class="genre-link" data-genre="cartoon">CARTOON</a></li>
  <li><a href="#" class="genre-link" data-genre="comedy">COMEDY</a></li>
  <li><a href="#" class="genre-link" data-genre="comic">COMIC</a></li>
  <li><a href="#" class="genre-link" data-genre="cooking">COOKING</a></li>
  <li><a href="#" class="genre-link" data-genre="demons">DEMONS</a></li>
  <li><a href="#" class="genre-link" data-genre="gender-bender">GENDER BENDER</a></li>
  <li><a href="#" class="genre-link" data-genre="ghosts">GHOSTS</a></li>
  <li><a href="#" class="genre-link" data-genre="harem">HAREM</a></li>
  <li><a href="#" class="genre-link" data-genre="historical">HISTORICAL</a></li>
  <li><a href="#" class="genre-link" data-genre="horror">HORROR</a></li>
  <li><a href="#" class="genre-link" data-genre="isekai">ISEKAI</a></li>
  <li><a href="#" class="genre-link" data-genre="josei">JOSEI</a></li>
  <li><a href="#" class="genre-link" data-genre="long-strip">LONG STRIP</a></li>
  <li><a href="#" class="genre-link" data-genre="mafia">MAFIA</a></li>
  <li><a href="#" class="genre-link" data-genre="magic">MAGIC</a></li>
  <li><a href="#" class="genre-link" data-genre="manga">MANGA</a></li>
  <li><a href="#" class="genre-link" data-genre="manhua">MANHUA</a></li>
  <li><a href="#" class="genre-link" data-genre="manhwa">MANHWA</a></li>
  <li><a href="#" class="genre-link" data-genre="martial-arts">MARTIAL ARTS</a></li>
  <li><a href="#" class="genre-link" data-genre="mature">MATURE</a></li>
  <li><a href="#" class="genre-link" data-genre="mecha">MECHA</a></li>
  <li><a href="#" class="genre-link" data-genre="medical">MEDICAL</a></li>
  <li><a href="#" class="genre-link" data-genre="military">MILITARY</a></li>
  <li><a href="#" class="genre-link" data-genre="monster">MONSTER</a></li>
  <li><a href="#" class="genre-link" data-genre="monster-girls">MONSTER GIRLS</a></li>
  <li><a href="#" class="genre-link" data-genre="monsters">MONSTERS</a></li>
  <li><a href="#" class="genre-link" data-genre="music">MUSIC</a></li>
  <li><a href="#" class="genre-link" data-genre="mystery">MYSTERY</a></li>
  <li><a href="#" class="genre-link" data-genre="office">OFFICE</a></li>
  <li><a href="#" class="genre-link" data-genre="office-workers">OFFICE WORKERS</a></li>
  <li><a href="#" class="genre-link" data-genre="one-shot">ONE SHOT</a></li>
  <li><a href="#" class="genre-link" data-genre="police">POLICE</a></li>
  <li><a href="#" class="genre-link" data-genre="psychological">PSYCHOLOGICAL</a></li>
  <li><a href="#" class="genre-link" data-genre="reincarnation">REINCARNATION</a></li>
    <li><a href="#" class="genre-link" data-genre="harem">HAREM</a></li>
  <li><a href="#" class="genre-link" data-genre="historical">HISTORICAL</a></li>
  <li><a href="#" class="genre-link" data-genre="horror">HORROR</a></li>
  <li><a href="#" class="genre-link" data-genre="isekai">ISEKAI</a></li>
  <li><a href="#" class="genre-link" data-genre="josei">JOSEI</a></li>
  <li><a href="#" class="genre-link" data-genre="long-strip">LONG STRIP</a></li>
  <li><a href="#" class="genre-link" data-genre="mafia">MAFIA</a></li>
  <li><a href="#" class="genre-link" data-genre="magic">MAGIC</a></li>
  <li><a href="#" class="genre-link" data-genre="manga">MANGA</a></li>
  <li><a href="#" class="genre-link" data-genre="manhua">MANHUA</a></li>
  <li><a href="#" class="genre-link" data-genre="manhwa">MANHWA</a></li>
  <li><a href="#" class="genre-link" data-genre="martial-arts">MARTIAL ARTS</a></li>
  <li><a href="#" class="genre-link" data-genre="mature">MATURE</a></li>
  <li><a href="#" class="genre-link" data-genre="mecha">MECHA</a></li>
  <li><a href="#" class="genre-link" data-genre="medical">MEDICAL</a></li>
  <li><a href="#" class="genre-link" data-genre="military">MILITARY</a></li>
  <li><a href="#" class="genre-link" data-genre="monster">MONSTER</a></li>
  <li><a href="#" class="genre-link" data-genre="monster-girls">MONSTER GIRLS</a></li>
  <li><a href="#" class="genre-link" data-genre="monsters">MONSTERS</a></li>
  <li><a href="#" class="genre-link" data-genre="music">MUSIC</a></li>
  <li><a href="#" class="genre-link" data-genre="mystery">MYSTERY</a></li>
  <li><a href="#" class="genre-link" data-genre="office">OFFICE</a></li>
  <li><a href="#" class="genre-link" data-genre="office-workers">OFFICE WORKERS</a></li>
  <li><a href="#" class="genre-link" data-genre="one-shot">ONE SHOT</a></li>
  <li><a href="#" class="genre-link" data-genre="police">POLICE</a></li>
  <li><a href="#" class="genre-link" data-genre="psychological">PSYCHOLOGICAL</a></li>
  <li><a href="#" class="genre-link" data-genre="reincarnation">REINCARNATION</a></li>
  <li><a href="#" class="genre-link" data-genre="romance">ROMANCE</a></li>
  <li><a href="#" class="genre-link" data-genre="school-life">SCHOOL LIFE</a></li>
  <li><a href="#" class="genre-link" data-genre="sci-fi">SCI-FI</a></li>
  <li><a href="#" class="genre-link" data-genre="science-fiction">SCIENCE FICTION</a></li>
  <li><a href="#" class="genre-link" data-genre="seinen">SEINEN</a></li>
  <li><a href="#" class="genre-link" data-genre="shoujo">SHOUJO</a></li>
  <li><a href="#" class="genre-link" data-genre="shoujo-ai">SHOUJO AI</a></li>
  <li><a href="#" class="genre-link" data-genre="shounen">SHOUNEN</a></li>
  <li><a href="#" class="genre-link" data-genre="shounen-ai">SHOUNEN AI</a></li>
  <li><a href="#" class="genre-link" data-genre="slice-of-life">SLICE OF LIFE</a></li>
  <li><a href="#" class="genre-link" data-genre="smut">SMUT</a></li>
  <li><a href="#" class="genre-link" data-genre="soft-yaoi">SOFT YAOI</a></li>
  <li><a href="#" class="genre-link" data-genre="sports">SPORTS</a></li>
  <li><a href="#" class="genre-link" data-genre="super-power">SUPER POWER</a></li>
  <li><a href="#" class="genre-link" data-genre="superhero">SUPERHERO</a></li>
  <li><a href="#" class="genre-link" data-genre="supernatural">SUPERNATURAL</a></li>
  <li><a href="#" class="genre-link" data-genre="thriller">THRILLER</a></li>
  <li><a href="#" class="genre-link" data-genre="time-travel">TIME TRAVEL</a></li>
  <li><a href="#" class="genre-link" data-genre="tragedy">TRAGEDY</a></li>
  <li><a href="#" class="genre-link" data-genre="vampire">VAMPIRE</a></li>
  <li><a href="#" class="genre-link" data-genre="vampires">VAMPIRES</a></li>
  <li><a href="#" class="genre-link" data-genre="video-games">VIDEO GAMES</a></li>
  <li><a href="#" class="genre-link" data-genre="villainess">VILLAINESS</a></li>
  <li><a href="#" class="genre-link" data-genre="web-comic">WEB COMIC</a></li>
  <li><a href="#" class="genre-link" data-genre="webtoons">WEBTOONS</a></li>
  <li><a href="#" class="genre-link" data-genre="boys love">YAOI</a></li>
  <li><a href="#" class="genre-link" data-genre="yuri">YURI</a></li>
  <li><a href="#" class="genre-link" data-genre="zombies">ZOMBIES</a></li>
</ul>

<div class="modal" id="modal">
  <div class="modal-content">
    <p id="modal-message"></p>
  </div>
</div>



<script>
// const numberOfManga = 100; // Number of manga IDs to retrieve
// const mangaIds = []; // Array to store manga IDs

// // Generate an array of manga IDs
// for (let i = 1; i <= numberOfManga; i++) {
//   mangaIds.push(i);
// }

// const genreMap = {}; // Object to store genres by manga ID

// // Fetch manga data for each ID and group genres
// Promise.all(
//   mangaIds.map(mangaId => {
//     const url = `https://api.jikan.moe/v4/manga/${mangaId}/full`;
//     return fetch(url)
//       .then(response => response.json())
//       .then(data => {
//         if (data.data && data.data.genres) {
//           const genres = data.data.genres;
//           const genreNames = genres.map(genre => genre.name);

//           genreMap[mangaId] = genreNames;
//         }
//       })
//       .catch(error => {
//         console.error(`Error fetching data for manga ID ${mangaId}:`, error);
//       });
//   })
// )
//   .then(() => {
//     // Store genreMap in local storage
//  localStorage.setItem('mangaGenres', JSON.stringify(genreMap));

// const storedGenres = localStorage.getItem('mangaGenres');
// console.log('Stored manga genres:', storedGenres);


//     console.log('Manga genres grouped and stored in local storage.');
//   })
//   .catch(error => {
//     console.error('Error:', error);
//   });



// // ------------------------
// // Retrieve stored genres from local storage
// const storedGenres = localStorage.getItem('mangaGenres');

// // Check if a genre exists in the genreMap object (case-insensitive)
// function checkGenreExists(genre) {
//   return genreMap && Object.values(genreMap).some(genres =>
//     genres.some(g => g.toLowerCase() === genre.toLowerCase())
//   );
// }

// // Update HTML elements based on genre existence
// function updateGenreElements() {
//   const genreLinks = document.querySelectorAll('.genre-link');

//   genreLinks.forEach(link => {
//     const genre = link.dataset.genre;

//     if (checkGenreExists(genre)) {
//       link.classList.add('genre-exists');
//     } else {
//       link.classList.remove('genre-exists');
//     }
//   });
// }

// // Call the function to update genre elements
// updateGenreElements();


// // Function to handle genre link click
// function handleGenreLinkClick(event) {
//   event.preventDefault();

//   const clickedLink = event.target;
//   const genre = clickedLink.dataset.genre;

//   if (checkGenreExists(genre)) {
//     // Genre exists, perform desired action
//     console.log(`Genre "${genre}" exists.`);
//   } else {
//     // Genre doesn't exist
//     console.log(`Genre "${genre}" does not exist.`);
//   }
// }

// // Add click event listener to genre links
// const genreLinks = document.querySelectorAll('.genre-link');
// genreLinks.forEach(link => {
//   link.addEventListener('click', handleGenreLinkClick);
// });

// // Call the function to update genre elements
// updateGenreElements();



const numberOfManga = 500; // Number of manga IDs to retrieve
const mangaIds = []; // Array to store manga IDs

// Generate an array of manga IDs
for (let i = 1; i <= numberOfManga; i++) {
  mangaIds.push(i);
}

const mangaData = {}; // Object to store manga data by manga ID

// Fetch manga data for each ID and store the desired data
Promise.all(
  mangaIds.map(mangaId => {
    const url = `https://api.jikan.moe/v4/manga/${mangaId}/full`;
    return fetch(url)
      .then(response => response.json())
      .then(data => {
        if (data.data) {
          const manga = data.data;

           const mangaInfo = {
            title: manga.title,
            imageTitle: manga.images.jpg.large_image_url,
            chapters: manga.chapters,
            genres: manga.genres.map(genre => genre.name)
          };

          mangaData[mangaId] = mangaInfo;
        }
      })
      .catch(error => {
        console.log(`Error fetching data for manga ID ${mangaId}:`, error);
      });
  })
)
  .then(() => {
    // Store mangaData in local storage
    localStorage.setItem('mangaData', JSON.stringify(mangaData));

    const storedMangaData = localStorage.getItem('mangaData');
    console.log('Stored manga data:', storedMangaData);

    console.log('Manga data stored in local storage.');

    // Call the function to update genre elements
    updateGenreElements();
  })
  .catch(error => {
    console.log('Error:', error);
  });

// Retrieve stored manga data from local storage
const storedMangaData = localStorage.getItem('mangaData');

// Check if a genre exists in the mangaData object (case-insensitive)
function checkGenreExists(genre) {
  return mangaData && Object.values(mangaData).some(manga =>
    manga.genres.some(g => g.toLowerCase() === genre.toLowerCase())
  );
}

// Update HTML elements based on genre existence
function updateGenreElements() {
  const genreLinks = document.querySelectorAll('.genre-link');

  genreLinks.forEach(link => {
    const genre = link.dataset.genre;

    if (checkGenreExists(genre)) {
      link.classList.add('genre-exists');
    } else {
      link.classList.remove('genre-exists');
    }
  });
}

// Call the function to update genre elements
updateGenreElements();

// Update genre link click handlers
// Assuming you have retrieved and stored the mangaData in localStorage as follows:
// const storedMangaData = localStorage.getItem('mangaData');

// Convert the stored mangaData from a string to an object
// const mangaData = JSON.parse(storedMangaData);

// Function to handle genre link click
function handleGenreLinkClick(event) {
  event.preventDefault();

  const clickedLink = event.target;
  const genre = clickedLink.dataset.genre;

  const matchingManga = Object.values(mangaData).filter(manga =>
    manga.genres.some(g => g.toLowerCase() === genre.toLowerCase())
  );

  if (matchingManga.length > 0) {
    console.log(`Manga with genre "${genre}":`);
    matchingManga.forEach(manga => {
      console.log(`- Manga Title: ${manga.title}`);
      console.log(`- Manga image: ${manga.imageTitle}`);
      console.log(`  Chapters: ${manga.chapters}`);
      console.log(`  Genres: ${manga.genres.join(', ')}`);
    });

    // Redirect to single.html page with genre parameter
    window.location.href = `../pages/single.html?genre=${encodeURIComponent(genre)}&mangaData=${encodeURIComponent(JSON.stringify(mangaData))}`;
  } else {
    console.log(`No manga found with genre "${genre}".`);
    showModal(`No manga found with genre "${genre}".`);
  }
}



function showModal(message) {
  const modal = document.getElementById('modal');
  const modalMessage = document.getElementById('modal-message');

  modalMessage.textContent = message;
  modal.style.display = 'flex'; // Show the modal

  // Hide the modal after a certain time
  setTimeout(() => {
    modal.style.display = 'none'; // Hide the modal
  }, 3000); // Hide after 3 seconds (adjust as needed)
}


// Add click event listener to genre links
const genreLinks = document.querySelectorAll('.genre-link');
genreLinks.forEach(link => {
  link.addEventListener('click', handleGenreLinkClick);
});




</script>
    
</body>
</html>